var CryptoJS=CryptoJS||function(w,d){var x={},u=x.lib={},t=u.Base=function(){function f(){}return{extend:function(h){f.prototype=this;var i=new f;h&&i.mixIn(h);i.$super=this;return i},create:function(){var h=this.extend();h.init.apply(h,arguments);return h},init:function(){},mixIn:function(h){for(var i in h){h.hasOwnProperty(i)&&(this[i]=h[i])}h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.$super.extend(this)}}}(),v=u.WordArray=t.extend({init:function(h,f){h=this.words=h||[];this.sigBytes=f!=d?f:4*h.length},toString:function(f){return(f||c).stringify(this)},concat:function(h){var f=this.words,k=h.words,j=this.sigBytes,h=h.sigBytes;this.clamp();if(j%4){for(var i=0;i<h;i++){f[j+i>>>2]|=(k[i>>>2]>>>24-8*(i%4)&255)<<24-8*((j+i)%4)}}else{if(65535<k.length){for(i=0;i<h;i+=4){f[j+i>>>2]=k[i>>>2]}}else{f.push.apply(f,k)}}this.sigBytes+=h;return this},clamp:function(){var h=this.words,f=this.sigBytes;h[f>>>2]&=4294967295<<32-8*(f%4);h.length=w.ceil(f/4)},clone:function(){var f=t.clone.call(this);f.words=this.words.slice(0);return f},random:function(h){for(var f=[],i=0;i<h;i+=4){f.push(4294967296*w.random()|0)}return v.create(f,h)}}),s=x.enc={},c=s.Hex={stringify:function(h){for(var f=h.words,h=h.sigBytes,k=[],j=0;j<h;j++){var i=f[j>>>2]>>>24-8*(j%4)&255;k.push((i>>>4).toString(16));k.push((i&15).toString(16))}return k.join("")},parse:function(h){for(var f=h.length,j=[],i=0;i<f;i+=2){j[i>>>3]|=parseInt(h.substr(i,2),16)<<24-4*(i%8)}return v.create(j,f/2)}},e=s.Latin1={stringify:function(h){for(var f=h.words,h=h.sigBytes,j=[],i=0;i<h;i++){j.push(String.fromCharCode(f[i>>>2]>>>24-8*(i%4)&255))}return j.join("")},parse:function(h){for(var f=h.length,j=[],i=0;i<f;i++){j[i>>>2]|=(h.charCodeAt(i)&255)<<24-8*(i%4)}return v.create(j,f)}},b=s.Utf8={stringify:function(h){try{return decodeURIComponent(escape(e.stringify(h)))}catch(f){throw Error("Malformed UTF-8 data")}},parse:function(f){return e.parse(unescape(encodeURIComponent(f)))}},g=u.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=v.create();this._nDataBytes=0},_append:function(f){"string"==typeof f&&(f=b.parse(f));this._data.concat(f);this._nDataBytes+=f.sigBytes},_process:function(i){var h=this._data,n=h.words,m=h.sigBytes,l=this.blockSize,k=m/(4*l),k=i?w.ceil(k):w.max((k|0)-this._minBufferSize,0),i=k*l,m=w.min(4*i,m);if(i){for(var j=0;j<i;j+=l){this._doProcessBlock(n,j)}j=n.splice(0,i);h.sigBytes-=m}return v.create(j,m)},clone:function(){var f=t.clone.call(this);f._data=this._data.clone();return f},_minBufferSize:0});u.Hasher=g.extend({init:function(){this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(f){this._append(f);this._process();return this},finalize:function(f){f&&this._append(f);this._doFinalize();return this._hash},clone:function(){var f=g.clone.call(this);f._hash=this._hash.clone();return f},blockSize:16,_createHelper:function(f){return function(h,i){return f.create(i).finalize(h)}},_createHmacHelper:function(f){return function(h,i){return a.HMAC.create(f,i).finalize(h)}}});var a=x.algo={};return x}(Math);(function(){var b=CryptoJS,a=b.lib.WordArray;b.enc.Base64={stringify:function(h){var l=h.words,k=h.sigBytes,n=this._map;h.clamp();for(var h=[],i=0;i<k;i+=3){for(var m=(l[i>>>2]>>>24-8*(i%4)&255)<<16|(l[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|l[i+2>>>2]>>>24-8*((i+2)%4)&255,j=0;4>j&&i+0.75*j<k;j++){h.push(n.charAt(m>>>6*(3-j)&63))}}if(l=n.charAt(64)){for(;h.length%4;){h.push(l)}}return h.join("")},parse:function(i){var i=i.replace(/\s/g,""),n=i.length,m=this._map,p=m.charAt(64);p&&(p=i.indexOf(p),-1!=p&&(n=p));for(var p=[],j=0,o=0;o<n;o++){if(o%4){var l=m.indexOf(i.charAt(o-1))<<2*(o%4),k=m.indexOf(i.charAt(o))>>>6-2*(o%4);p[j>>>2]|=(l|k)<<24-8*(j%4);j++}}return a.create(p,j)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();CryptoJS.lib.Cipher||function(a){var z=CryptoJS,A=z.lib,x=A.Base,w=A.WordArray,d=A.BufferedBlockAlgorithm,c=z.enc.Base64,D=z.algo.EvpKDF,m=A.Cipher=d.extend({cfg:x.extend(),createEncryptor:function(f,e){return this.create(this._ENC_XFORM_MODE,f,e)},createDecryptor:function(f,e){return this.create(this._DEC_XFORM_MODE,f,e)},init:function(f,e,g){this.cfg=this.cfg.extend(g);this._xformMode=f;this._key=e;this.reset()},reset:function(){d.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){return function(e){return{encrypt:function(f,i,g){return("string"==typeof i?b:y).encrypt(e,f,i,g)},decrypt:function(f,i,g){return("string"==typeof i?b:y).decrypt(e,f,i,g)}}}}()});A.StreamCipher=m.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var v=z.mode={},C=A.BlockCipherMode=x.extend({createEncryptor:function(f,e){return this.Encryptor.create(f,e)},createDecryptor:function(f,e){return this.Decryptor.create(f,e)},init:function(f,e){this._cipher=f;this._iv=e}}),v=v.CBC=function(){function f(j,i,g){var k=this._iv;k?this._iv=a:k=this._prevBlock;for(var l=0;l<g;l++){j[i+l]^=k[l]}}var e=C.extend();e.Encryptor=e.extend({processBlock:function(i,k){var g=this._cipher,j=g.blockSize;f.call(this,i,k,j);g.encryptBlock(i,k);this._prevBlock=i.slice(k,k+j)}});e.Decryptor=e.extend({processBlock:function(g,l){var k=this._cipher,i=k.blockSize,j=g.slice(l,l+i);k.decryptBlock(g,l);f.call(this,g,l,i);this._prevBlock=j}});return e}(),B=(z.pad={}).Pkcs7={pad:function(i,g){for(var n=4*g,n=n-i.sigBytes%n,l=n<<24|n<<16|n<<8|n,k=[],j=0;j<n;j+=4){k.push(l)}n=w.create(k,n);i.concat(n)},unpad:function(e){e.sigBytes-=e.words[e.sigBytes-1>>>2]&255}};A.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:B}),reset:function(){m.reset.call(this);var f=this.cfg,e=f.iv,f=f.mode;if(this._xformMode==this._ENC_XFORM_MODE){var g=f.createEncryptor}else{g=f.createDecryptor,this._minBufferSize=1}this._mode=g.call(f,this,e&&e.words)},_doProcessBlock:function(f,e){this._mode.processBlock(f,e)},_doFinalize:function(){var f=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){f.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0),f.unpad(e)}return e},blockSize:4});var h=A.CipherParams=x.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(z.format={}).OpenSSL={stringify:function(f){var e=f.ciphertext,f=f.salt,e=(f?w.create([1398893684,1701076831]).concat(f).concat(e):e).toString(c);return e=e.replace(/(.{64})/g,"$1\n")},parse:function(f){var f=c.parse(f),e=f.words;if(1398893684==e[0]&&1701076831==e[1]){var g=w.create(e.slice(2,4));e.splice(0,4);f.sigBytes-=16}return h.create({ciphertext:f,salt:g})}},y=A.SerializableCipher=x.extend({cfg:x.extend({format:v}),encrypt:function(g,f,k,j){var j=this.cfg.extend(j),i=g.createEncryptor(k,j),f=i.finalize(f),i=i.cfg;return h.create({ciphertext:f,key:k,iv:i.iv,algorithm:g,mode:i.mode,padding:i.padding,blockSize:g.blockSize,formatter:j.format})},decrypt:function(f,e,i,g){g=this.cfg.extend(g);e=this._parse(e,g.format);return f.createDecryptor(i,g).finalize(e.ciphertext)},_parse:function(f,e){return"string"==typeof f?e.parse(f):f}}),z=(z.kdf={}).OpenSSL={compute:function(f,e,i,g){g||(g=w.random(8));f=D.create({keySize:e+i}).compute(f,g);i=w.create(f.words.slice(e),4*i);f.sigBytes=4*e;return h.create({key:f,iv:i,salt:g})}},b=A.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:z}),encrypt:function(f,e,i,g){g=this.cfg.extend(g);i=g.kdf.compute(i,f.keySize,f.ivSize);g.iv=i.iv;f=y.encrypt.call(this,f,e,i.key,g);f.mixIn(i);return f},decrypt:function(f,e,i,g){g=this.cfg.extend(g);e=this._parse(e,g.format);i=g.kdf.compute(i,f.keySize,f.ivSize,e.salt);g.iv=i.iv;return y.decrypt.call(this,f,e,i.key,g)}})}();(function(){var a=CryptoJS,m=a.lib.BlockCipher,e=a.algo,f=[],l=[],k=[],j=[],i=[],h=[],d=[],b=[],A=[],n=[];(function(){for(var u=[],t=0;256>t;t++){u[t]=128>t?t<<1:t<<1^283}for(var v=0,q=0,t=0;256>t;t++){var s=q^q<<1^q<<2^q<<3^q<<4,s=s>>>8^s&255^99;f[v]=s;l[s]=v;var r=u[v],g=u[r],p=u[g],o=257*u[s]^16843008*s;k[v]=o<<24|o>>>8;j[v]=o<<16|o>>>16;i[v]=o<<8|o>>>24;h[v]=o;o=16843009*p^65537*g^257*r^16843008*v;d[s]=o<<24|o>>>8;b[s]=o<<16|o>>>16;A[s]=o<<8|o>>>24;n[s]=o;v?(v=r^u[u[u[p^r]]],q^=u[u[q]]):v=q=1}})();var c=[0,1,2,4,8,16,32,64,128,27,54],e=e.AES=m.extend({_doReset:function(){for(var g=this._key,s=g.words,o=g.sigBytes/4,g=4*((this._nRounds=o+6)+1),p=this._keySchedule=[],r=0;r<g;r++){if(r<o){p[r]=s[r]}else{var q=p[r-1];r%o?6<o&&4==r%o&&(q=f[q>>>24]<<24|f[q>>>16&255]<<16|f[q>>>8&255]<<8|f[q&255]):(q=q<<8|q>>>24,q=f[q>>>24]<<24|f[q>>>16&255]<<16|f[q>>>8&255]<<8|f[q&255],q^=c[r/o|0]<<24);p[r]=p[r-o]^q}}s=this._invKeySchedule=[];for(o=0;o<g;o++){r=g-o,q=o%4?p[r]:p[r-4],s[o]=4>o||4>=r?q:d[f[q>>>24]]^b[f[q>>>16&255]]^A[f[q>>>8&255]]^n[f[q&255]]}},encryptBlock:function(g,o){this._doCryptBlock(g,o,this._keySchedule,k,j,i,h,f)},decryptBlock:function(g,p){var o=g[p+1];g[p+1]=g[p+3];g[p+3]=o;this._doCryptBlock(g,p,this._invKeySchedule,d,b,A,n,l);o=g[p+1];g[p+1]=g[p+3];g[p+3]=o},_doCryptBlock:function(J,I,K,F,H,G,E,D){for(var C=this._nRounds,z=J[I]^K[0],y=J[I+1]^K[1],x=J[I+2]^K[2],B=J[I+3]^K[3],w=4,s=1;s<C;s++){var v=F[z>>>24]^H[y>>>16&255]^G[x>>>8&255]^E[B&255]^K[w++],u=F[y>>>24]^H[x>>>16&255]^G[B>>>8&255]^E[z&255]^K[w++],t=F[x>>>24]^H[B>>>16&255]^G[z>>>8&255]^E[y&255]^K[w++],B=F[B>>>24]^H[z>>>16&255]^G[y>>>8&255]^E[x&255]^K[w++],z=v,y=u,x=t}v=(D[z>>>24]<<24|D[y>>>16&255]<<16|D[x>>>8&255]<<8|D[B&255])^K[w++];u=(D[y>>>24]<<24|D[x>>>16&255]<<16|D[B>>>8&255]<<8|D[z&255])^K[w++];t=(D[x>>>24]<<24|D[B>>>16&255]<<16|D[z>>>8&255]<<8|D[y&255])^K[w++];B=(D[B>>>24]<<24|D[z>>>16&255]<<16|D[y>>>8&255]<<8|D[x&255])^K[w++];J[I]=v;J[I+1]=u;J[I+2]=t;J[I+3]=B},keySize:8});a.AES=m._createHelper(e)})();(function(){var f=CryptoJS,g=f.lib,a=g.WordArray,g=g.Hasher,e=[],b=f.algo.SHA1=g.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(r,j){for(var t=this._hash.words,p=t[0],o=t[1],l=t[2],k=t[3],q=t[4],s=0;80>s;s++){if(16>s){e[s]=r[j+s]|0}else{var n=e[s-3]^e[s-8]^e[s-14]^e[s-16];e[s]=n<<1|n>>>31}n=(p<<5|p>>>27)+q+e[s];n=20>s?n+((o&l|~o&k)+1518500249):40>s?n+((o^l^k)+1859775393):60>s?n+((o&l|o&k|l&k)-1894007588):n+((o^l^k)-899497514);q=k;k=l;l=o<<30|o>>>2;o=p;p=n}t[0]=t[0]+p|0;t[1]=t[1]+o|0;t[2]=t[2]+l|0;t[3]=t[3]+k|0;t[4]=t[4]+q|0},_doFinalize:function(){var j=this._data,k=j.words,h=8*this._nDataBytes,i=8*j.sigBytes;k[i>>>5]|=128<<24-i%32;k[(i+64>>>9<<4)+15]=h;j.sigBytes=4*k.length;this._process()}});f.SHA1=g._createHelper(b);f.HmacSHA1=g._createHmacHelper(b)})();(function(){var b=CryptoJS,a=b.enc.Utf8;b.algo.HMAC=b.lib.Base.extend({init:function(r,q){r=this._hasher=r.create();"string"==typeof q&&(q=a.parse(q));var p=r.blockSize,n=4*p;q.sigBytes>n&&(q=r.finalize(q));for(var m=this._oKey=q.clone(),l=this._iKey=q.clone(),k=m.words,j=l.words,o=0;o<p;o++){k[o]^=1549556828,j[o]^=909522486}m.sigBytes=l.sigBytes=n;this.reset()},reset:function(){var c=this._hasher;c.reset();c.update(this._iKey)},update:function(c){this._hasher.update(c);return this},finalize:function(d){var c=this._hasher,d=c.finalize(d);c.reset();return c.finalize(this._oKey.clone().concat(d))}})})();(function(){var c=CryptoJS,f=c.lib,i=f.Base,e=f.WordArray,f=c.algo,h=f.HMAC,g=f.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:f.SHA1,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(F,E){for(var D=this.cfg,A=h.create(D.hasher,F),z=e.create(),C=e.create([1]),v=z.words,s=C.words,u=D.keySize,D=D.iterations;v.length<u;){var y=A.update(E).finalize(C);A.reset();for(var x=y.words,o=x.length,w=y,t=1;t<D;t++){w=A.finalize(w);A.reset();for(var l=w.words,B=0;B<o;B++){x[B]^=l[B]}}z.concat(y);s[0]++}z.sigBytes=4*u;return z}});c.PBKDF2=function(j,d,k){return g.create(k).compute(j,d)}})();var cryptobox={};cryptobox.popover={};cryptobox.popover.show=function(c,a,d){var e=document.createElement("div");document.body.appendChild(e);e.style.position="absolute";e.style.zIndex=99999;e.style.top=0;e.style.left=0;e.style.width=c;e.style.height=a;var f=document.createElement("div");e.appendChild(f);f.style.paddingTop="20px";f.style.paddingLeft="20px";f.style.paddingRight="40px";f.style.paddingBottom="20px";var b=document.createElement("div");f.appendChild(b);b.style.color="#fff";b.style.background="#000";b.style.opacity=0.8;b.style.width="100%";b.style.height="100%";b.style.padding="10px";b.style.border="0 none";b.style.borderRadius="6px";b.style.boxShadow="0 0 8px rgba(0,0,0,.8)";b.appendChild(d);e.onclick=function(g){g.stopPropagation()};document.body.onclick=function(){e.parentNode.removeChild(e)}};cryptobox.form={};cryptobox.form.withToken=function(b){if(b.action=="__token__"){return true}for(var a in b.fields){if(b.fields[a]=="__token__"){return true}}return false};cryptobox.form.login=function(f,e,d){if(e.broken){return}if(d!=undefined){if(e.action=="__token__"){e.action=d.form.action}for(var c in e.fields){if(e.fields[c]=="__token__"){e.fields[c]=d.form.fields[c]}}}var a=null;if(f){a=window.open(e.action,e.name);if(!a){return}}else{a=window;document.close();document.open()}var b="";b+="<html><head></head><body><%= @text[:wait_for_login] %><form id='formid' method='"+e.method+"' action='"+e.action+"'>";for(var c in e.fields){b+="<input type='hidden' name='"+c+"' value='"+e.fields[c]+"'/>"}b+="</form><script type='text/javascript'>document.getElementById('formid').submit()</s";b+="cript></body></html>";a.document.write(b);return a};cryptobox.form.fill=function(c){var a=document.querySelectorAll("input[type=text], input[type=password]");for(var b=0;b<a.length;b++){var d=null;for(var e in c.fields){if(e==a[b].attributes.name.value){d=c.fields[e]}}if(d){a[b].value=d}}};cryptobox.form.sitename=function(a){return a.replace(/[^/]+\/\/([^/]+).+/,"$1").replace(/^www./,"")};cryptobox.form.toJson=function(){var k=document.URL;var c=document.title;var l="";for(var g=0;g<document.forms.length;g++){var d=document.forms[g];var h="";for(var f=0;f<d.elements.length;f++){var e=d.elements[f];if(e.name==""){continue}if(h==""){h='\t\t\t"'+e.name+'": "'+e.value+'"'}else{h+=',\n\t\t\t"'+e.name+'": "'+e.value+'"'}}var b=d.method;if(b!="get"){b="post"}var a='\t\t"action": "'+d.action+'",\n\t\t"method": "'+b+'",\n\t\t"fields":\n\t\t{\n'+h+"\n\t\t}";if(l==""){l+="[\n"}else{l+=",\n"}l+='{\n\t"type":"login",\n\t"name": "'+c+'",\n\t"address": "'+k+'",\n\t"form":\n\t{\n'+a+"\n\t}\n}\n"}if(l){l+="]"}return l};cryptobox.cipher={};cryptobox.cipher.decrypt=function(f,d,g,e,c){var b=CryptoJS.PBKDF2(f,CryptoJS.enc.Base64.parse(d),{keySize:256/32,iterations:e});var a=CryptoJS.AES.decrypt(g,b,{mode:CryptoJS.mode.CBC,iv:CryptoJS.enc.Base64.parse(c),padding:CryptoJS.pad.Pkcs7});return a.toString(CryptoJS.enc.Utf8)};cryptobox.cfg=getCryptoboxConfig();function unlock(pwd,caption){formToLink=function(name,form){var divStyle='style="border: 0 none; border-radius: 6px; background-color: #111; padding: 10px; margin: 5px; text-align: left;"';var aStyle='style="color: #fff; font-size: 18px; text-decoration: none;"';return"<div "+divStyle+"><a "+aStyle+' href="#" onClick=\'javascript:cryptobox.form.fill('+JSON.stringify(form)+");return false;'>"+name+"</a></div>"};var text=cryptobox.cipher.decrypt(pwd,cryptobox.cfg.pbkdf2.salt,cryptobox.cfg.ciphertext,cryptobox.cfg.pbkdf2.iterations,cryptobox.cfg.aes.iv);var data=eval(text);var matched=new Array();for(var i=0;i<data.length;i++){var el=data[i];if(el.type=="magic"){if(el.value!="270389"){throw ("<%= @text[:incorrect_password] %>")}continue}if(el.type!="login"){continue}var address=cryptobox.form.sitename(document.URL);var action=cryptobox.form.sitename(el.form.action);if(address==action){matched.push(el)}}if(matched.length==0){caption.innerHTML="<%= @text[:login_not_found] %>";window.setTimeout(function(){document.body.click()},1000)}else{if(matched.length==1){caption.innerHTML="<%= @text[:wait_for_login] %>";cryptobox.form.fill(matched[0].form)}else{var r="";for(var i=0;i<matched.length;i++){var el=matched[i];r+=formToLink(el.name+" ("+el.form.vars.user+")",el.form)}caption.innerHTML="<%= @text[:select_login] %>"+r}}}var div=document.createElement("div");div.style.textAlign="center";var caption=document.createElement("h1");caption.appendChild(document.createTextNode("<%= @text[:enter_password] %>"));div.appendChild(caption);var form=document.createElement("form");var input=document.createElement("input");input.type="password";input.style.border="1px solid #006";input.style.fontSize="18px";var buttonUnlock=document.createElement("input");buttonUnlock.type="submit";buttonUnlock.style.border="1px solid #006";buttonUnlock.style.fontSize="14px";buttonUnlock.value="<%= @text[:button_unlock] %>";var buttonDiv=document.createElement("div");buttonDiv.style.marginTop="20px";buttonDiv.appendChild(buttonUnlock);form.appendChild(input);form.appendChild(buttonDiv);div.appendChild(form);form.onsubmit=function(){try{div.removeChild(form);unlock(input.value,caption)}catch(a){caption.innerHTML=a;window.setTimeout(function(){document.body.click()},1000)}return false};cryptobox.popover.show("320","165",div);input.focus();