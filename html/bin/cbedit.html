<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>File: cbedit [cryptobox]</title>

  <link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet" />

  <script src="../js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file">
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../bin/cbedit.html">cbedit</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Cryptobox.html">Cryptobox</a></li>
        
          <li><a href="../Cryptobox/Config.html">Cryptobox::Config</a></li>
        
          <li><a href="../Cryptobox/Db.html">Cryptobox::Db</a></li>
        
          <li><a href="../Array.html">Array</a></li>
        
          <li><a href="../ChromeOutput.html">ChromeOutput</a></li>
        
          <li><a href="../DesktopHtmlOutput.html">DesktopHtmlOutput</a></li>
        
          <li><a href="../FillBookmarkletOutput.html">FillBookmarkletOutput</a></li>
        
          <li><a href="../FormBookmarkletOutput.html">FormBookmarkletOutput</a></li>
        
          <li><a href="../Hash.html">Hash</a></li>
        
          <li><a href="../JsonOutput.html">JsonOutput</a></li>
        
          <li><a href="../MobileHtmlOutput.html">MobileHtmlOutput</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../Output.html">Output</a></li>
        
          <li><a href="../Template.html">Template</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    
<p>if File.exists?(File.join(File.expand_path(‘../..’, __FILE__), ‘.git’))</p>

<pre>railties_path = File.expand_path('../../lib', __FILE__)
$:.unshift(railties_path)</pre>

<p>end</p>

<p>require ‘optparse’ require ‘cryptobox’</p>

<p>$verbose = false options = {</p>

<pre>update: true,
edit: true,
stdout: false,
stdin: false</pre>

<p>}</p>

<p>OptionParser.new do |opts|</p>

<pre>opts.banner = &quot;Usage: #{File.basename($PROGRAM_NAME)} [options]&quot;

opts.on(&quot;-v&quot;, &quot;--[no-]verbose&quot;, &quot;Run verbosely&quot;) do |v|
  $verbose = v
end
opts.on(&quot;-e&quot;, &quot;--[no-]edit&quot;, &quot;Run editor (default)&quot;) do |v|
  options[:edit] = v
end
opts.on(&quot;-u&quot;, &quot;--[no-]update&quot;, &quot;Generate HTML (default)&quot;) do |v|
  options[:update] = v
end
opts.on(&quot;--stdout&quot;, &quot;Print decrypted data to standard output&quot;) do |v|
  options[:stdout] = v
end
opts.on(&quot;--stdin&quot;, &quot;Read decrypted data from standard input&quot;) do |v|
  options[:stdin] = v
end
opts.on(&quot;-c&quot;, &quot;--config PATH&quot;, &quot;Configuration file path&quot;) do |path|
  options[:config] = path
end
opts.on_tail(&quot;-h&quot;, &quot;--help&quot;, &quot;Show this message&quot;) do
  puts opts
  exit
end
opts.on_tail(&quot;--version&quot;, &quot;Show version&quot;) do
  puts &quot;Cryptobox #{Cryptobox::VERSION}&quot;
  exit
end</pre>

<p>end.parse!</p>

<p>config = <a
href="../Cryptobox/Config.html#method-c-new">Cryptobox::Config.new</a> <a
href="http://:config">options</a> db = <a
href="../Cryptobox/Db.html#method-c-new">Cryptobox::Db.new</a> <a
href="http://:path">config</a>[:cryptobox],</p>

<pre>config[:path][:backup],
config[:cryptobox][:keep_backups]</pre>

<p>db.load</p>

<p>if <a href="http://:stdout">options</a></p>

<pre>$stdout.puts db.plaintext
exit</pre>

<p>end</p>

<p>if <a href="http://:edit">options</a></p>

<pre>if options[:stdin]
  db.plaintext = $stdin.read
else
  new_plaintext = edit config[:ui][:editor], db.plaintext
  exit if new_plaintext == db.plaintext

  db.plaintext = new_plaintext
end

db.save</pre>

<p>end</p>

<p>if <a href="http://:update">options</a></p>

<pre>JsonOutput.new(config, db).run

DesktopHtmlOutput.new(config).run
MobileHtmlOutput.new(config).run

FillBookmarkletOutput.new(config).run
FormBookmarkletOutput.new(config).run

ChromeOutput.new(config).run</pre>

<p>end</p>

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>
</body>
</html>

